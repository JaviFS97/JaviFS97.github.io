<!DOCTYPE html><html lang="es" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Recopilación Activa de información" /><meta name="author" content="Javier Fernández Santos" /><meta property="og:locale" content="es" /><meta name="description" content="En esta sección se han recopilado algunas de las principales herramientas usadas durante la fase de recopilación activa de información." /><meta property="og:description" content="En esta sección se han recopilado algunas de las principales herramientas usadas durante la fase de recopilación activa de información." /><link rel="canonical" href="https://javifs97.github.io/posts/seg-ofensiva-reco-activa/" /><meta property="og:url" content="https://javifs97.github.io/posts/seg-ofensiva-reco-activa/" /><meta property="og:site_name" content="JaviFS97" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-21T07:35:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Recopilación Activa de información" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Javier Fernández Santos"},"description":"En esta sección se han recopilado algunas de las principales herramientas usadas durante la fase de recopilación activa de información.","url":"https://javifs97.github.io/posts/seg-ofensiva-reco-activa/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://javifs97.github.io/posts/seg-ofensiva-reco-activa/"},"headline":"Recopilación Activa de información","dateModified":"2022-02-15T17:06:06+01:00","datePublished":"2021-06-21T07:35:00+02:00","@context":"https://schema.org"}</script><title>Recopilación Activa de información | JaviFS97</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JaviFS97"><meta name="application-name" content="JaviFS97"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">JaviFS97</a></div><div class="site-subtitle font-italic">Welcome! I'm javier, and in this blog is my personal space where I share articles on certain topics, research I do in my lab, CTF write-ups, and quick notes on things I want to remember. and quick notes on things I want to remember.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/JaviFS97" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/JaviFS97" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Recopilación Activa de información</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Recopilación Activa de información</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/JaviFS97">Javier Fernández Santos</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2021-06-21 07:35:00 +0200" data-toggle="tooltip" data-placement="bottom" title="Mon, Jun 21, 2021, 7:35 AM +0200" >Jun 21, 2021</em> </span> <span> Updated <em class="timeago" date="2022-02-15 08:06:06 -0800 " data-toggle="tooltip" data-placement="bottom" title="Tue, Feb 15, 2022, 8:06 AM -0800" >Feb 15</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2335 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><p>En esta sección se han recopilado algunas de las principales herramientas usadas durante la fase de recopilación activa de información.</p><ul><li><a href="#antes-de-continuar">Antes de continuar…</a><ul><li><a href="#dónde-entra-el-concepto-de-anonimato">¿Dónde entra el concepto de anonimato?</a><li><a href="#qué-es-lo-que-tratamos-de-conseguir-con-las-técnicas-que-intentar-garantizar-el-anonimato-en-internet">¿Qué es lo que tratamos de conseguir con las técnicas que intentar garantizar el anonimato en Internet?</a><li><a href="#a-tener-en-cuenta-leer-antes-de-seguir-con-el-resto">¡¡A tener en cuenta!! LEER ANTES DE SEGUIR CON EL RESTO</a><li><a href="#importancia-del-anonimato">Importancia del anonimato</a></ul><li><a href="#objetivo">Objetivo</a><li><a href="#presentación-del-entorno-vulnerable-metasploitable3">Presentación del entorno vulnerable: Metasploitable3.</a><li><a href="#dnsrecon-y-transferencia-de-zona">DNSrecon y transferencia de zona</a><li><a href="#nmap">Nmap</a><ul><li><a href="#descubrimiento-de-hosts">Descubrimiento de Hosts</a><li><a href="#escaneo-de-puertos">Escaneo de puertos</a><li><a href="#descubrimiento-de-servicios">Descubrimiento de servicios</a><li><a href="#identificación-del-sistema-operativo">Identificación del sistema operativo</a></ul></ul><h1 id="antes-de-continuar">Antes de continuar…</h1><h2 id="dónde-entra-el-concepto-de-anonimato">¿Dónde entra el concepto de anonimato?<a href="#dónde-entra-el-concepto-de-anonimato"><i class="fas fa-hashtag"></i></a></h2></h2><p>Utilizando algún método para garantizar el anonimato como puede ser una VPN, un proxy, red tor,… de manera genérica lo que estamos haciendo es tunelizar nuestro tráfico de red aplicando algún tipo de cifrado desde una máquina en nuestra red doméstica/local hasta un servidor en Internet que se encargará de descifrar el tráfico y realizar la petición a donde nosotros queramos dirigirla. Es importante entender, que aunque el contenido del tráfico de red vaya cifrado, <strong>ese tráfico de red sigue pasando por nuestro router para poder llegar al servidor que lo descifra y, por lo tanto, nuestro router sigue estando expuesto a Internet.</strong></p><p><strong>El riesgo de seguridad al que estamos expuestos todos</strong>, independientemente de utilizar mecanismos para garantizar el anonimato o no, <strong>es a la explotación de un posible fallo de seguridad en nuestro router de manera que permita ganar acceso a los sistemas que se encuentren conectados a nuestra red local</strong>. Este riesgo no puede mitigarse por completo debido a que el router tiene que estar expuesto a Internet para poder habilitar la conexión de los dispositivos que se encuentran en nuestra red privada.</p><h2 id="qué-es-lo-que-tratamos-de-conseguir-con-las-técnicas-que-intentar-garantizar-el-anonimato-en-internet">¿Qué es lo que tratamos de conseguir con las técnicas que intentar garantizar el anonimato en Internet?<a href="#qué-es-lo-que-tratamos-de-conseguir-con-las-técnicas-que-intentar-garantizar-el-anonimato-en-internet"><i class="fas fa-hashtag"></i></a></h2></h2><p>Con este tipo de técnicas y herramientas <strong>tratamos de garantizar la privacidad y confidencialidad de nuestras conexiones</strong>. De esta manera, cuando nos conectamos a una máquina en Internet, por ejemplo un servidor de aplicación que proporciona una página web, lo hacemos a través de una o varias máquinas intermedias con las que establecemos una comunicación cifrada.</p><p>Aquí hay varias cosas que se deben tener en cuenta. Las máquinas que se utilizan para salir a internet cuando utilizas mecanismos de anonimato como una VPN, tienen que descifrar tu tráfico de red y, por lo tanto, pueden monitorizarlo y registrarlo. <strong>Si realizas cualquier tipo de actividad ilegal utilizando estos mecanismos, nada te garantiza que no vayas a ser identificado, sobre todo si estás utilizando un servicio gratuito.</strong></p><p>Como reitero en varias ocasiones, <strong>no debería utilizarse ninguna técnica de hacking que sea ilegal sobre un sistema o una organización con la que no tienes un contrato establecido para la realización de un hacking ético</strong>. En caso contrario, utilices o no técnicas que garanticen el anonimato, te estás exponiendo a que ser identificado.</p><h2 id="a-tener-en-cuenta-leer-antes-de-seguir-con-el-resto">¡¡A tener en cuenta!! LEER ANTES DE SEGUIR CON EL RESTO<a href="#a-tener-en-cuenta-leer-antes-de-seguir-con-el-resto"><i class="fas fa-hashtag"></i></a></h2></h2><p>En secciones anteriores no se presentan herramientas para garantizar el anonimato porque las técnicas de recopilación pasiva de información no son ilegales y no necesitas ocultar tu dirección ip pública. Son técnicas que se basan en búsqueda de información en fuentes abiertas y no van dirigidas a ningún objetivo en particular. A partir de ahora, donde empezamos a ver técnicas de recopilación activa de información, en las que se dirigen a objetivos específicos, <strong>establecemos un laboratorio virtual donde realizamos todas las pruebas sobre servidores y máquinas en nuestro entorno controlado, nunca hacia Internet</strong>. No os recomiendo bajo ningún concepto que utilicéis técnicas activas de hacking sobre objetivos que se encuentren en Internet y para los que no disponéis de un contrato previo para realización de un Hacking Ético, ni siquiera utilizando herramientas para garantizar el anonimato.</p><h2 id="importancia-del-anonimato">Importancia del anonimato<a href="#importancia-del-anonimato"><i class="fas fa-hashtag"></i></a></h2></h2><p>Una vez presentada esta reflexión sobre las técnicas para garantizar el anonimato en Internet, me gustaría hablar sobre la importancia que tienen para ciertas tareas. Uno de los ejemplos más claros en los que pueden servir técnicas como una VPN es cuando estamos conectados a una red local no confiable, como puede ser la red wifi de una cafetería o de un aeropuerto. En estos casos no sabemos que dispositivos hay conectados a nuestra misma red local o si pueden estar monitorizando nuestra comunicación (como se presenta en la sección “Explotación y hacking de vulnerabilidades en Red”), por lo tanto, el uso de una VPN, que cifra el tráfico de red desde nuestro equipo a un servidor en Internet, nos garantiza que alguien interceptando nuestra comunicación no pueda ver nada.</p><p>Para terminar con el artículo, me gustaría indicaros algunas de las soluciones y herramientas más populares para garantizar el anonimato en Internet:</p><ol><li>La opción más sencilla es utilizar un proxy. Si utilizas un proxy gratuito y público ten en cuenta que en esa máquina de destino por la que estas saliendo a Internet pueden estar monitorizando tu navegación.<li>Otro de los mecanismos más comunes es utilizar una VPN.<li>Aunque es menos popular, podéis conectaros a Internet a través de la Red Tor, esto garantiza que los nodos de salida a Internet pertenezcan a esta red y, por lo tanto, su dirección ip pública sea diferente a la tuya. En este caso también debes tener en cuenta que mucha gente utiliza este mecanismos y sus direcciones ip públicas están bloqueadas frecuentemente por los buscadores más populares como Google.<li>Podéis establecer vuestra propia máquina de salto en la nube. Puedes crear una cuenta gratuita de AWS (Amazon Web Services) y crear una máquina (instancia) en la nube que puedes utilizar de máquina de salto para conectarte a Internet y hacer las peticiones a través de ella, sería muy similar a tener tu proxy personal.</ol><h1 id="objetivo">Objetivo</h1><p>Recolección de información sobre un objetivo determinado utilizando <strong>métodos que interactúan de manera directa con la organización</strong> normalmente mediante el envío de tráfico de red.</p><p>Alcance:</p><ul><li>Escáneres de hosts.<li>Escáneres de puertos.<li>Escáneres de servicios.</ul><p>En muchas ocasiones la actividad de este tipo de técnicas suele ser detectada como actividad sospechosa o maliciosa.</p><h1 id="presentación-del-entorno-vulnerable-metasploitable3">Presentación del entorno vulnerable: Metasploitable3.</h1><p>Metasploitable3 es una máquina virtual gratuita de Windows Server 2008 y ubuntu 16.04 que cuenta con varias vulnerabilidades listas para ser explotadas y practicar nuestras técnicas de hacking o simular ataques, Metasploitable3 ha sido desarrollado por Rapid7, los mismos desarrolladores del conocido Framework MetaSploit.</p><p>Es usado por gran parte de la industria de la ciberseguridad por varios motivos, cómo por ejemplo, la formación de personal para la explotación de redes, pruebas de software o demostración y viabilidad de ataques.</p><p>Usar una máquina virtual para probar nuestros ataques es la manera más cómoda y rápida de conocer hasta dónde podemos llegar a explotar un sistema sin ponerlo en riesgo, además, siempre contamos con la ventaja de que si algo sale mal, volvemos a reinstalar y tenemos de nuevo un sistema vulnerable en cuestión de minutos.</p><h1 id="dnsrecon-y-transferencia-de-zona">DNSrecon y transferencia de zona</h1><p>[TODO]</p><h1 id="nmap">Nmap</h1><p>Nmap (“Network Mapper”) es una herramienta de código abierto para la exploración de redes y la auditoría de seguridad. Fue diseñada para escanear rápidamente grandes redes, aunque funciona bien contra hosts individuales. Nmap utiliza paquetes para determinar qué hosts están disponibles en la red, qué servicios (nombre y versión de la aplicación) ofrecen esos hosts, qué sistemas operativos (y versiones del SO) están ejecutando, qué tipo de filtros de paquetes/firewalls están en uso, y docenas de otras características.</p><p>Aunque Nmap se utiliza habitualmente para auditorías de seguridad, muchos administradores de sistemas y redes lo encuentran útil para tareas rutinarias como el inventario de la red, la gestión de los programas de actualización de servicios y la supervisión del tiempo de actividad de los hosts o servicios.</p><p>En la ruta <code class="language-plaintext highlighter-rouge">usr/share/nmap/scripts</code> tenemos una colección de script que nos pueden ayudar a obtener información valiosa. Para llevarlo a cabo, filtrar en esa carpeta los scripts que tenemos para un determinado servicio mediante <code class="language-plaintext highlighter-rouge">ls http*</code>, escogemos el script y ejecutamos <code class="language-plaintext highlighter-rouge">nmap -v &lt;acción&gt; -p &lt;puerto&gt; --script=&lt;script_puerto_escogido&gt; &lt;ip&gt;</code></p><h2 id="descubrimiento-de-hosts">Descubrimiento de Hosts<a href="#descubrimiento-de-hosts"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><p><strong>Descubrimiento de un host en particular</strong>: <code class="language-plaintext highlighter-rouge">nmap -sn &lt;ip_objetivo&gt;</code> -&gt; determina si el servidor está levantado. Realizar un TCP SYNC contra los puertos 80 y 443. Si no hay nada corriendo en esos puertos dará el servidor como no levantado.</p><p>Si se ejecuta con permisos de administrador <code class="language-plaintext highlighter-rouge">sudo</code>, será menos intrusivo pues se hará una petición ARP para ver si el servidor está activo.</p><li><p><strong>Descubrimiento de todos los hosts de una red</strong>: <code class="language-plaintext highlighter-rouge">nmap -sn &lt;ip_objetivo&gt;/&lt;mascara_red&gt;</code> -&gt; determina cuantos de los hosts están levantados. De nuevo, realizar un TCP SYN contra los puertos 80 y 443. Si no hay nada corriendo en esos puertos dará el host como apagado.</p><p>Si se ejecuta con permisos de administrador <code class="language-plaintext highlighter-rouge">sudo</code>, será menos intrusivo pues se hará una petición ARP para ver si el servidor está activo.</p></ul><p>Documentación oficial sobre <a href="https://nmap.org/book/man-host-discovery.html">host discovery</a>. Se observa que en este apartado existen más comandos para el descubrimiento de host, pero muchos de ellos son descubrimiento de puertos, lo cual genera mucho tráfico de red para determinar si un host está o no levantado.</p><h2 id="escaneo-de-puertos">Escaneo de puertos<a href="#escaneo-de-puertos"><i class="fas fa-hashtag"></i></a></h2></h2><p>Esta técnica sirve para <strong>determinar</strong> el estado de los puertos.</p><p>Esta técnica <strong>NO determina</strong> qué aplicación hay corriendo por detrás del puerto. Por ejemplo, si encuentra el puerto 80 abierto dirá que es HTTP, pero puede que en el servidor hayan cambiado el servicio HTTP a otro puerto.</p><p>Más info <a href="https://nmap.org/book/man-port-scanning-techniques.html">aquí</a>.</p><p>Los 6 estados reconocidos por nmap:</p><ol><li><p><strong>Abierto:</strong> Una aplicación acepta conexiones TCP o paquetes UDP en este puerto. El encontrar esta clase de puertos es generalmente el objetivo primario de realizar un sondeo de puertos. Las personas orientadas a la seguridad saben que cada puerto abierto es un vector de ataque. Los atacantes y las personas que realizan pruebas de intrusión intentan aprovechar puertos abiertos, por lo que los administradores intentan cerrarlos, o protegerlos con cortafuegos, pero sin que los usuarios legítimos pierdan acceso al servicio. Los puertos abiertos también son interesantes en sondeos que no están relacionados con la seguridad porque indican qué servicios están disponibles para ser utilizados en una red.</p><li><p><strong>Cerrado:</strong> Un puerto cerrado es accesible: recibe y responde a las sondas de Nmap, pero no tiene una aplicación escuchando en él. Pueden ser útiles para determinar si un equipo está activo en cierta dirección IP (mediante descubrimiento de sistemas, o sondeo ping), y es parte del proceso de detección de sistema operativo. Como los puertos cerrados son alcanzables, o sea, no se encuentran filtrados, puede merecer la pena analizarlos pasado un tiempo, en caso de que alguno se abra. Los administradores pueden querer considerar bloquear estos puertos con un cortafuegos. Si se bloquean aparecerían filtrados, como se discute a continuación.</p><li><p><strong>Filtrado:</strong> Nmap no puede determinar si el puerto se encuentra abierto porque un filtrado de paquetes previene que sus sondas alcancen el puerto. El filtrado puede provenir de un dispositivo de cortafuegos dedicado, de las reglas de un enrutador, o por una aplicación de cortafuegos instalada en el propio equipo. Estos puertos suelen frustrar a los atacantes, porque proporcionan muy poca información. A veces responden con mensajes de error ICMP del tipo 3, código 13 (destino inalcanzable: comunicación prohibida por administradores), pero los filtros que sencillamente descartan las sondas sin responder son mucho más comunes. Esto fuerza a Nmap a reintentar varias veces, considerando que la sonda pueda haberse descartado por congestión en la red en vez de haberse filtrado. Esto ralentiza drásticamente los sondeos.</p><li><p><strong>No filtrado:</strong> Este estado indica que el puerto es accesible, pero que Nmap no puede determinar si se encuentra abierto o cerrado. Solamente el sondeo ACK, utilizado para determinar las reglas de un cortafuegos, clasifica a los puertos según este estado. El analizar puertos no filtrados con otros tipos de análisis, como el sondeo Window, SYN o FIN, pueden ayudar a determinar si el puerto se encuentra abierto.</p><li><p><strong>abierto|filtrado:</strong> Nmap marca a los puertos en este estado cuando no puede determinar si el puerto se encuentra abierto o filtrado. Esto ocurre para tipos de análisis donde no responden los puertos abiertos. La ausencia de respuesta puede también significar que un filtro de paquetes ha descartado la sonda, o que se elimina cualquier respuesta asociada. De esta forma, Nmap no puede saber con certeza si el puerto se encuentra abierto o filtrado. Los sondeos UDP, protocolo IP, FIN, Null y Xmas clasifican a los puertos de esta manera.</p><li><p><strong>cerrado|filtrado:</strong> Este estado se utiliza cuando Nmap no puede determinar si un puerto se encuentra cerrado o filtrado, y puede aparecer aparecer sólo durante un sondeo IP ID pasivo.</p></ol><ul><li>Opciones<ul><li><p>-sS (TCP SYN scan) -&gt; <code class="language-plaintext highlighter-rouge">nmap -sS &lt;ip&gt;</code> Esta técnica se denomina <strong>a menudo escaneo semiabierto</strong>, porque no se abre una conexión TCP completa (no realiza el Three-way Handshake). Envías un paquete SYN, como si fueras a abrir una conexión real y luego esperas una respuesta. a) Un SYN/ACK indica que el puerto está escuchando (abierto), b) mientras que un RST (reinicio) es indicativo de que no está escuchando. Si no se recibe respuesta tras varias retransmisiones, el puerto se marca como filtrado.</p><li><p>-sT (TCP connect scan) -&gt; <code class="language-plaintext highlighter-rouge">nmap -sT &lt;ip&gt;</code> La técnica anterior, al no realizar la conexión TCP completa (Three-way Handshake) puede levantar sospechas en el IDS. Para evitar que salten las alarmas lo realizamos con -sT, que lanza una conexión TCP completa (en un buen IDS también saltarán al realizarlo con -sT).</p><li><p>-oX -&gt; Exportar los resultados a una hoja xml para ver con más claridad los resultados. Por ejemplo: <code class="language-plaintext highlighter-rouge">nmap -sS &lt;ip&gt; -oX &lt;archivo_destino&gt;.xml --stylesheet="https://svn.nmap.org/nmap/docs/namp.xsl"</code> Más info <a href="https://nmap.org/book/man-output.html">aquí</a>.</p></ul></ul><p><img data-proofer-ignore data-src="/assets/img/posts/20210621/Nmap.png" alt="Nmap xml" class="shadow" style="min-width: 70%;" /> <em>Nmap xml</em></p><h2 id="descubrimiento-de-servicios">Descubrimiento de servicios<a href="#descubrimiento-de-servicios"><i class="fas fa-hashtag"></i></a></h2></h2><p>Vamos a ir un paso más allá y vamos a ver qué servicio se encuentra corriendo detrás de un puerto abierto.</p><ul><li>-sV (Version detection) -&gt; <code class="language-plaintext highlighter-rouge">nmap -sV &lt;ip&gt;</code>. Nos devuelve los puertos que estén abiertos y la aplicación que está corriendo. Además, tambien nos informa del SO de la maquina. Con toda esta información, podremos buscar si existe algún exploit que comprometa la seguridad de las aplicaciones o del SO.</ul><p><img data-proofer-ignore data-src="/assets/img/posts/20210621/Nmap-DescubrimientoServicios.png" alt="Nmap descubrimiento de servicios" class="shadow" style="min-width: 70%;" /> <em>Nmap descubrimiento de servicios</em></p><h2 id="identificación-del-sistema-operativo">Identificación del sistema operativo<a href="#identificación-del-sistema-operativo"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>-O (Enable OS detection) -&gt; <code class="language-plaintext highlighter-rouge">nmap -O &lt;ip&gt;</code>. Más info <a href="https://nmap.org/book/man-os-detection.html">aquí</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ciberseguridad/'>Ciberseguridad</a>, <a href='/categories/seguridad-ofensiva/'>Seguridad Ofensiva</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/pentesting/" class="post-tag no-text-decoration" >Pentesting</a> <a href="/tags/metasploitable3/" class="post-tag no-text-decoration" >Metasploitable3</a> <a href="/tags/nmap/" class="post-tag no-text-decoration" >NMAP</a> <a href="/tags/dnsrecon/" class="post-tag no-text-decoration" >DNSrecon</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Recopilación Activa de información - JaviFS97&url=https://javifs97.github.io/posts/seg-ofensiva-reco-activa/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Recopilación Activa de información - JaviFS97&u=https://javifs97.github.io/posts/seg-ofensiva-reco-activa/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Recopilación Activa de información - JaviFS97&url=https://javifs97.github.io/posts/seg-ofensiva-reco-activa/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/vulnerability-zerologon/">Zerologon Vulnerability Implementation</a><li><a href="/posts/TFG/">TFG - Sistema de control y administración de una red de garajes inteligentes y automatizados</a><li><a href="/posts/TFM/">Use of Natural Language Processing techniques for the automatic identification of TTPs in Threat Intelligence Reports.</a><li><a href="/posts/seg-ofensiva-introduccion/">Introducción al Hacking Ético y Penetration Testing</a><li><a href="/posts/seg-ofensiva-explotacion-vuln-red/">Explotación de vulnerabilidades en Red</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/pentesting/">Pentesting</a> <a class="post-tag" href="/tags/nmap/">NMAP</a> <a class="post-tag" href="/tags/archive-org/">Archive.org</a> <a class="post-tag" href="/tags/armitage/">Armitage</a> <a class="post-tag" href="/tags/arpspoofing/">ARPspoofing</a> <a class="post-tag" href="/tags/automatizaci%C3%B3n/">Automatización</a> <a class="post-tag" href="/tags/bettercap/">Bettercap</a> <a class="post-tag" href="/tags/burpsuite/">BurpSuite</a> <a class="post-tag" href="/tags/cpe/">CPE</a> <a class="post-tag" href="/tags/cryptography/">Cryptography</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/seg-ofensiva-analisis-vulnerabilidades/"><div class="card-body"> <em class="timeago small" date="2021-06-29 05:35:00 +0200" >Jun 29, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Análisis de vulnerabilidades</h3><div class="text-muted small"><p> Durante esta sección veremos las diferentes alternativas, tanto manuales como automáticas, de las que disponemos para realizar análisis de vulnerabilidades sobre un objetivo. Contenido Objetivo...</p></div></div></a></div><div class="card"> <a href="/posts/seg-ofensiva-explotacion-vuln-host/"><div class="card-body"> <em class="timeago small" date="2021-07-04 03:17:00 +0200" >Jul 4, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Explotación de vulnerabilidades en Hosts</h3><div class="text-muted small"><p> Durante los posts anteriores hemos visto métodos para recopilar y analizar información sobre nuestros objetivos. Durante este post veremos como explotar (en Hosts) aquellas vulnerabilidades que pre...</p></div></div></a></div><div class="card"> <a href="/posts/seg-ofensiva-reco-pasiva/"><div class="card-body"> <em class="timeago small" date="2021-05-25 12:03:00 +0200" >May 25, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Recopilación Pasiva de información</h3><div class="text-muted small"><p> En esta sección se han recopilado algunas de las principales herramientas usadas durante la fase de recopilación pasiva de información. Índice Objetivo Hacking con buscadores: Google Hacking ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/seg-ofensiva-reco-semipasiva/" class="btn btn-outline-primary" prompt="Older"><p>Recopilación Semi-Pasiva de información</p></a> <a href="/posts/seg-ofensiva-analisis-vulnerabilidades/" class="btn btn-outline-primary" prompt="Newer"><p>Análisis de vulnerabilidades</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://www.linkedin.com/in/javifs97">Javier Fernández Santos</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/pentesting/">Pentesting</a> <a class="post-tag" href="/tags/nmap/">NMAP</a> <a class="post-tag" href="/tags/archive-org/">Archive.org</a> <a class="post-tag" href="/tags/armitage/">Armitage</a> <a class="post-tag" href="/tags/arpspoofing/">ARPspoofing</a> <a class="post-tag" href="/tags/automatizaci%C3%B3n/">Automatización</a> <a class="post-tag" href="/tags/bettercap/">Bettercap</a> <a class="post-tag" href="/tags/burpsuite/">BurpSuite</a> <a class="post-tag" href="/tags/cpe/">CPE</a> <a class="post-tag" href="/tags/cryptography/">Cryptography</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
